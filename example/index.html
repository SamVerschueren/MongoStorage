<!DOCTYPE html>
<html>
<head>
    <title>MongoStorage Example</title>

    <script type="text/javascript" src="../src/EJSON.js"></script>

    <script type="text/javascript" src="../src/lodash.min.js"></script>
    <script type="text/javascript" src="../src/MongoStorage.js"></script>
    <script type="text/javascript" src="../src/Collection.js"></script>
    <script type="text/javascript" src="../src/Collection.Selector.js"></script>
    <script type="text/javascript" src="../src/Collection.Modify.js"></script>
    <script type="text/javascript" src="../src/ObjectId.js"></script>
    <script type="text/javascript" src="../src/LocalStorage.Extension.js"></script> 

    <script type="text/javascript">
        window.localStorage.clear();

        var db = new MongoStorage();
        db.use('noobjs_dev');
        db.createCollection('users');

        // Insert multiple documents at one or one document
        db.users.insert([{firstName: 'Foo 1', name: 'Bar', age: 24}, {firstName: 'Foo 2', name: 'Bar', age: 26}]);

        // db.users.find({name: 'Bar'}, {sort: {age: -1}}, function(data) {
        //     console.log(JSON.stringify(data));
        // });
        // 
    

        db.users.find({$or: [{age: 24}, {age: 25}]}, function(data) {
            console.log(data);
        });
    </script>
</head>
<body id="main">
    
    <script type="text/javascript">
        var body = document.getElementById('main'),
            storage = window.localStorage;

        for(var key in window.localStorage) {
            if(!_.isFunction(window.localStorage[key])) {
                var title = document.createElement('h2');
                title.appendChild(document.createTextNode(key));

                var data = document.createElement('pre');
                data.appendChild(document.createTextNode(window.localStorage[key]));

                body.appendChild(title);
                body.appendChild(data);
            }
        }
    </script>
<body>
</html>